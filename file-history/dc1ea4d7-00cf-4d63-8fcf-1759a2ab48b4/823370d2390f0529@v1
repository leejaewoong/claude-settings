"""
Application configuration using Pydantic Settings
"""
from typing import List
from pydantic_settings import BaseSettings
from pydantic import Field


class Settings(BaseSettings):
    """Application settings"""

    # Environment
    ENVIRONMENT: str = Field(default="development", env="ENVIRONMENT")

    # Database
    DATABASE_URL: str = Field(..., env="DATABASE_URL")

    # Redis
    REDIS_URL: str = Field(..., env="REDIS_URL")

    # OpenAI
    OPENAI_API_KEY: str = Field(..., env="OPENAI_API_KEY")
    OPENAI_MODEL: str = Field(default="gpt-4-turbo-2024-04-09", env="OPENAI_MODEL")
    OPENAI_EMBEDDING_MODEL: str = Field(
        default="text-embedding-3-small", env="OPENAI_EMBEDDING_MODEL"
    )

    # Slack
    SLACK_BOT_TOKEN: str = Field(..., env="SLACK_BOT_TOKEN")
    SLACK_CLIENT_ID: str = Field(..., env="SLACK_CLIENT_ID")
    SLACK_CLIENT_SECRET: str = Field(..., env="SLACK_CLIENT_SECRET")

    # Reddit
    REDDIT_CLIENT_ID: str = Field(..., env="REDDIT_CLIENT_ID")
    REDDIT_CLIENT_SECRET: str = Field(..., env="REDDIT_CLIENT_SECRET")
    REDDIT_USER_AGENT: str = Field(
        default="SentimentCurator/1.0", env="REDDIT_USER_AGENT"
    )

    # Security
    ENCRYPTION_KEY: str = Field(..., env="ENCRYPTION_KEY")
    SECRET_KEY: str = Field(..., env="SECRET_KEY")
    ALGORITHM: str = Field(default="HS256", env="ALGORITHM")

    # CORS
    CORS_ORIGINS: List[str] = Field(
        default=["http://localhost:3000"], env="CORS_ORIGINS"
    )

    # Sentry
    SENTRY_DSN: str | None = Field(default=None, env="SENTRY_DSN")

    # Celery
    CELERY_BROKER_URL: str | None = Field(default=None, env="CELERY_BROKER_URL")
    CELERY_RESULT_BACKEND: str | None = Field(
        default=None, env="CELERY_RESULT_BACKEND"
    )

    class Config:
        env_file = ".env"
        env_file_encoding = "utf-8"
        case_sensitive = True


# Create settings instance
settings = Settings()
